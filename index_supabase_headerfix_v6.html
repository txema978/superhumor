<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Colecci√≥n Superhumor ‚Äî header fix (v6)</title>

  <!--
    ‚ö†Ô∏è Nota
    Este archivo SOLO a√±ade estilos compactos para cabecera, contadores, buscador
    y pesta√±as (filtros). No toca tu l√≥gica ni datos. Est√° pensado para subirse
    junto al resto de assets que ya tienes (env.js, supabase-js, etc.).
    Si lo subes como index_supabase_headerfix_v6.html, no sobreescribe tu index.
  -->

  <style>
    /* ====== RESET SUAVE ====== */
    :root{
      --brand:#1E63F3;
      --brand-600:#1954CC;
      --brand-50:#EAF1FF;
      --ink:#1E293B;
      --muted:#64748B;
      --surface:#FFFFFF;
      --chip:#EEF2F7;
      --ring: 0 0 0 3px rgba(30,99,243,.2);
      --radius:16px;
    }
    html,body{background:#F6F7FB;color:var(--ink);}
    *{box-sizing:border-box}
    button{cursor:pointer}

    /* ====== CABECERA COMPACTA (modo claro) ====== */
    .sh-hero{
      background: linear-gradient(180deg, #2563EB 0%, #1D4ED8 100%);
      color:#fff;
      padding:22px clamp(16px, 3vw, 28px);
      border-radius: 18px;
      margin: clamp(14px,2.5vw,20px) auto;
    }
    .sh-hero h1{
      margin:0 0 6px 0;
      font-weight: 750;
      font-size: clamp(22px, 2.6vw, 30px);
      letter-spacing:.2px;
      display:flex;align-items:center;gap:10px;
    }
    .sh-hero p{
      margin:0;
      opacity:.95;
      font-size: clamp(13px, 1.6vw, 16px);
    }
    .sh-hero .actions{
      margin-left:auto;
    }
    .sh-hero .edit-btn{
      background:#fff;
      color:#111827;
      border:none;
      border-radius:12px;
      padding:10px 16px;
      font-weight:600;
      box-shadow: 0 4px 14px rgba(0,0,0,.08);
    }
    .sh-hero .edit-btn:active{transform:translateY(1px)}

    /* ====== KPIs / CONTADORES M√ÅS PEQUE√ëOS ====== */
    .sh-kpis{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      margin:14px 0 10px 0;
    }
    .sh-kpi{
      background:var(--surface);
      border-radius: var(--radius);
      padding:14px 16px;
      box-shadow: 0 1px 0 rgba(16,24,40,.04), 0 1px 3px rgba(16,24,40,.08);
      display:flex;flex-direction:column;gap:8px;min-height:76px;
    }
    .sh-kpi small{color:var(--muted);font-weight:600}
    .sh-kpi .num{font-size: clamp(22px, 2.6vw, 28px);font-weight:800;}

    /* ====== BUSCADOR COMPACTO ====== */
    .sh-searchbar{
      display:flex;gap:10px;align-items:center;
      margin:10px 0 12px 0;
    }
    .sh-searchbar input[type="text"]{
      flex:1;
      height:44px;
      padding:0 14px;
      background:#fff;border:1px solid #E5E7EB;
      border-radius: 12px;
      outline: none;
      box-shadow: inset 0 1px 0 rgba(0,0,0,.03);
    }
    .sh-searchbar input[type="text"]:focus{
      border-color: var(--brand); box-shadow: var(--ring);
    }
    .sh-searchbar button{
      background:var(--brand);
      color:#fff;border:none;border-radius:12px;
      height:44px;padding:0 16px;font-weight:700;
      box-shadow: 0 8px 18px rgba(30,99,243,.18);
    }
    .sh-searchbar button:active{transform:translateY(1px)}

    /* ====== TABS / FILTROS (activo AZUL) ====== */
    .sh-tabs{
      display:flex;gap:10px;flex-wrap:wrap;margin:4px 0 16px 0;
    }
    .sh-tab{
      appearance:none;
      background:#fff;border:1px solid #E5E7EB;color:var(--ink);
      border-radius: 999px;height:40px;padding:0 16px;
      font-weight:700;
    }
    .sh-tab[aria-pressed="true"],
    .sh-tab.is-active{
      background: var(--brand); color:#fff; border-color: transparent;
      box-shadow: 0 10px 20px rgba(30,99,243,.18), 0 2px 6px rgba(30,99,243,.10);
    }

    /* ====== TARJETAS DE TOMO (NO SE TOCA L√ìGICA) ====== */
    .sh-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .sh-card{background:#fff;padding:16px;border-radius:16px;
      box-shadow: 0 1px 0 rgba(16,24,40,.04), 0 1px 3px rgba(16,24,40,.08);
    }

    /* ====== RESPONSIVE ====== */
    @media (max-width: 1024px){
      .sh-grid{grid-template-columns: repeat(2,1fr);}
    }
    @media (max-width: 640px){
      .sh-kpis{grid-template-columns: repeat(2,1fr);}
      .sh-grid{grid-template-columns: 1fr;}
      .sh-hero{padding:18px 14px}
    }
  </style>
</head>
<body>

  <!--
    Cabecera compacta. Si tu app ya pinta la cabecera din√°micamente,
    puedes dejar esta tal cual: no rompe nada, s√≥lo presenta.
  -->
  <header class="sh-hero" id="hero">
    <div style="display:flex;gap:14px;align-items:center">
      <h1>üìö Colecci√≥n Superhumor</h1>
      <div class="actions" id="header-actions">
        <button type="button" class="edit-btn" id="edit-trigger" hidden>Editar</button>
      </div>
    </div>
    <p>Gestiona tu colecci√≥n completa de 67 tomos ‚Äî <strong>v6</strong></p>
  </header>

  <!-- KPIs / contadores (si tu app ya los dibuja, este contenedor ayuda a compactarlos) -->
  <section class="sh-kpis" id="kpis" aria-hidden="true">
    <article class="sh-kpi"><small>Tomos que tienes</small><div class="num" id="kpi-tienes">‚Äî</div></article>
    <article class="sh-kpi"><small>Tomos que faltan</small><div class="num" id="kpi-faltan">‚Äî</div></article>
    <article class="sh-kpi"><small>Completado</small><div class="num" id="kpi-pct">‚Äî</div></article>
  </section>

  <!-- Buscador (compacto). Tu l√≥gica lo puede leer por #q y #go -->
  <div class="sh-searchbar">
    <input id="q" type="text" placeholder="Escribe n√∫meros (ej: 5, 12, 23-25, 30)" inputmode="numeric">
    <button id="go">Buscar</button>
  </div>

  <!-- Tabs / filtros (visual). Tu app puede enganchar estos botones por id -->
  <nav class="sh-tabs" role="tablist" aria-label="Filtros">
    <button id="tab-all" class="sh-tab" aria-pressed="true">Todos (67)</button>
    <button id="tab-have" class="sh-tab" aria-pressed="false">Que tengo (‚Äî)</button>
    <button id="tab-miss" class="sh-tab" aria-pressed="false">Que me faltan (‚Äî)</button>
  </nav>

  <!-- Contenedor donde tu app lista los tomos. No se toca tu l√≥gica. -->
  <main class="sh-grid" id="sh-grid">
    <!-- Tu app insertar√° las tarjetas aqu√≠. Este es s√≥lo un layout seguro. -->
    <article class="sh-card" aria-hidden="true">
      <strong>Tomo demo</strong>
      <p style="color:var(--muted)">Aqu√≠ se renderiza tu contenido actual. Este archivo no cambia la l√≥gica.</p>
    </article>
  </main>

  <script>
    // ===== Enchufes ligeros para NO romper tu app =====
    // 1) Si tu index real ya pinta KPIs/acciones, escondemos estos placeholders.
    (function (){
      const kpiEl = document.getElementById('kpis');
      // Si detectamos contadores renderizados por tu app (clases comunes), escondemos placeholders.
      const possibleKpis = document.querySelectorAll('[data-kpi], .kpi, .stats, .counters');
      if (possibleKpis.length) kpiEl.style.display = 'none';

      // Bot√≥n Editar: si tu app expone un trigger existente, lo reflejamos tambi√©n aqu√≠.
      const externalEdit = document.querySelector('[data-edit], #editar, [data-action="edit"]');
      const internalEdit = document.getElementById('edit-trigger');
      if (externalEdit){
        internalEdit.hidden = false;
        internalEdit.addEventListener('click', () => externalEdit.click());
      }
    })();

    // 2) Tabs visuales: marcamos activo y emitimos CustomEvent para que tu app lo pueda o√≠r si quiere.
    (function (){
      const tabs = [
        { id:'tab-all',   evt:'filter:all'   },
        { id:'tab-have',  evt:'filter:have'  },
        { id:'tab-miss',  evt:'filter:miss'  },
      ];
      tabs.forEach(t => {
        const el = document.getElementById(t.id);
        if (!el) return;
        el.addEventListener('click', () => {
          tabs.forEach(x => {
            const b = document.getElementById(x.id);
            if (b){ b.classList.remove('is-active'); b.setAttribute('aria-pressed','false'); }
          });
          el.classList.add('is-active');
          el.setAttribute('aria-pressed','true');
          document.dispatchEvent(new CustomEvent(t.evt));
        });
      });
      // activa por defecto
      const first = document.getElementById('tab-all');
      if (first) first.classList.add('is-active');
    })();

    // 3) Busca: cuando pulses "Buscar", disparamos un evento que tu JS puede manejar (no cambia tu l√≥gica).
    (function (){
      const q = document.getElementById('q');
      const go = document.getElementById('go');
      if (go){
        go.addEventListener('click', () => {
          document.dispatchEvent(new CustomEvent('search:query', { detail: (q && q.value || '').trim() }));
        });
      }
      if (q){
        q.addEventListener('keydown', (e) => {
          if (e.key === 'Enter'){
            e.preventDefault();
            document.dispatchEvent(new CustomEvent('search:query', { detail: (q.value || '').trim() }));
          }
        });
      }
    })();
  </script>
</body>
</html>
